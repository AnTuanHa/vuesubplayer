(function(e){function t(t){for(var r,o,u=t[0],c=t[1],s=t[2],l=0,b=[];l<u.length;l++)o=u[l],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&b.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(b.length)b.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var c=n[u];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vuesubplayer/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var d=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"1dd6":function(e,t,n){"use strict";n("f975")},2708:function(e,t,n){"use strict";n("4b5b")},"35d2":function(e,t,n){"use strict";n("c13e")},"4b5b":function(e,t,n){},"9c8a":function(e,t,n){},c13e:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),i={class:"video-subtitles-missing hint"},a={class:"video-missing hint"},o={class:"subtitles-missing hint"},u={class:"app-main"},c={class:"app-aside"},s={class:"controls"};function d(e,t,n,d,l,b){var f=Object(r["q"])("VideoPlayer"),v=Object(r["q"])("SubtitleViewer"),p=Object(r["q"])("SubtitleTracklistViewer");return Object(r["i"])(),Object(r["d"])("div",{id:"app",onDrop:t[3]||(t[3]=Object(r["v"])((function(){return e.onDropEvent&&e.onDropEvent.apply(e,arguments)}),["prevent","stop"])),onDragover:t[4]||(t[4]=Object(r["v"])((function(){}),["prevent","stop"]))},[Object(r["u"])(Object(r["f"])("div",i," Drag and drop a video file supported by your browser and subtitles file (.srt, .ass) on this page ",512),[[r["s"],!e.videoUrl&&!e.subtitlesUrl]]),Object(r["u"])(Object(r["f"])("div",a," Drag and drop a video file supported by your browser on this page ",512),[[r["s"],!e.videoUrl&&e.subtitlesUrl&&!e.loadVideoError]]),Object(r["u"])(Object(r["f"])("div",o," Drag and drop a subtitles file (.srt, .ass) on this page ",512),[[r["s"],e.videoUrl&&!e.subtitlesUrl&&!e.loadSubtitlesError]]),Object(r["u"])(Object(r["f"])("div",{class:"video-load-error hint"},Object(r["r"])(e.loadVideoError),513),[[r["s"],e.loadVideoError]]),Object(r["u"])(Object(r["f"])("div",{class:"subtitles-load-error hint"},Object(r["r"])(e.loadSubtitlesError),513),[[r["s"],e.loadSubtitlesError]]),Object(r["u"])(Object(r["f"])("div",u,[Object(r["f"])(f,{"video-url":e.videoUrl,"subtitles-url":e.subtitlesUrl,onOnVideoError:e.onVideoError},null,8,["video-url","subtitles-url","onOnVideoError"]),Object(r["f"])(v)],512),[[r["s"],e.videoUrl&&!e.loadVideoError]]),Object(r["u"])(Object(r["f"])("div",c,[Object(r["f"])(p)],512),[[r["s"],e.subtitlesUrl&&!e.loadSubtitlesError]]),Object(r["u"])(Object(r["f"])("div",s,[Object(r["f"])("div",{class:"edit-subtitles-button unselectable",onClick:t[1]||(t[1]=function(t){return e.Store.toggleEditMode()})},Object(r["r"])(e.Store.state.isInEditMode?"Quit":"Edit Subtitles"),1),Object(r["u"])(Object(r["f"])("a",{class:"download-subtitles-button unselectable",download:e.subtitleFileName,href:e.downloadSubtitlesLink}," Download Subtitles ",8,["download","href"]),[[r["s"],!e.Store.state.isInEditMode]]),Object(r["u"])(Object(r["f"])("input",{ref:"offsetInputElement",title:"Offset all subtitles by the specified value",class:"offset-input",placeholder:"Offset all subtitles",type:"number",step:"0.1",onInput:t[2]||(t[2]=function(t){return e.Store.offsetAllSubtitles(t.target.value)})},null,544),[[r["s"],e.Store.state.isInEditMode]])],512),[[r["s"],e.subtitlesUrl&&!e.loadSubtitlesError]])],32)}n("b0c0"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d");var l,b=n("2909"),f=(n("a4d3"),n("e01a"),Symbol("Store")),v=(n("7db0"),n("a9e3"),n("b85c"));(function(e){e[e["VideoPlayer"]=0]="VideoPlayer",e[e["SubtitleElement"]=1]="SubtitleElement"})(l||(l={}));var p=Object(r["m"])({cues:[],currentCue:{id:"0",startTime:0,endTime:0,text:"",voice:"",oldOffset:0},currentTimeEvent:{time:0,origin:l.VideoPlayer},isInEditMode:!1,cuesHasBeenChanged:!1}),m=function(e){p.cuesHasBeenChanged=e},O=function(e){p.cues=[];var t,n=Object(v["a"])(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;p.cues.push({id:r.id,startTime:r.startTime,endTime:r.endTime,text:r.text,voice:"",oldOffset:0})}}catch(i){n.e(i)}finally{n.f()}},j=function(e,t){var n=p.cues.find((function(t){return t.id===e}));n&&(n.text=t,m(!0))},T=function(e,t){var n=p.cues.find((function(t){return t.id===e}));n&&(n.startTime=t,m(!0))},h=function(e,t){var n=p.cues.find((function(t){return t.id===e}));n&&(n.endTime=t,m(!0))},g=function(e){var t=p.cues.find((function(t){return t.id===e}));t&&(p.currentCue=t)},E=function(e,t){p.currentTimeEvent={time:e,origin:t}},C=function(){p.isInEditMode=!p.isInEditMode},y=function(e){var t,n=Object(v["a"])(p.cues);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.startTime+=Number(e)-r.oldOffset,r.endTime+=Number(e)-r.oldOffset,r.oldOffset=e}}catch(i){n.e(i)}finally{n.f()}m(!0)},S={state:Object(r["n"])(p),setCuesHasBeenChanged:m,setCuesList:O,updateCueTextInCuesList:j,updateCueStartTimeInCuesList:T,updateCueEndTimeInCuesList:h,setCurrentCue:g,updateCurrentTimeEvent:E,toggleEditMode:C,offsetAllSubtitles:y},w=(n("a15b"),n("d81d"),n("fb6a"),n("a434"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("5319"),n("1276"),n("498a"),function(e,t){var n=e.match(t);return n?Math.round(60*parseInt(n[1],10)*60*1e3+60*parseInt(n[2],10)*1e3+1e3*parseInt(n[3],10)+10*parseInt(n[4],10))/1e3:0}),x=function(e){var t=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}(.*)$","i"),n=/(\d+):(\d\d):(\d\d).(\d\d)/,r=/\{[^}]+\}/g,i=e.split(/[\n\r]+/g),a=[];return i.forEach((function(e,i){var o=e.match(t);o&&a.push({id:"".concat(i+1),startTime:w(o[1],n),endTime:w(o[2],n),text:o[5].replace(r,"").replace(/\\N/gi,"\n").trim(),voice:o[3]&&o[4]?o[3]+" "+o[4]:"",oldOffset:0})})),a.length?a:null},I={convertAssToCaptions:x},V=(n("99af"),function(e,t){return("0000"+e).slice(-t)}),k=function(e){var t=new Date(2e3,0,1,0,0,0,1e3*Math.max(0,e));return[V(t.getHours(),2),V(t.getMinutes(),2),V(t.getSeconds(),2)+","+V(t.getMilliseconds(),3)].join(":")},U=function(e,t){var n=e.match(t);return n?Math.round(60*parseInt(n[1],10)*60*1e3+60*parseInt(n[2],10)*1e3+1e3*parseInt(n[3],10)+parseInt(n[4],10))/1e3:0},M=function(e){e=e.replace(/\r/g,"");var t=/(\d\d):(\d\d):(\d\d),(\d\d\d)/;if(!t.test(e))return null;var n=[],r=e.split(/\n[\n]+(?=[0-9]+\n)/g);return r.forEach((function(e){var r=e.split(/\n+/g);if(r.length>=3){var i=r[1].split(/\s*-->\s*/);n.push({id:r[0],startTime:U(i[0],t),endTime:U(i[1],t),text:r.slice(2).join("\n").replace(/\{\\an[0-9]{1,2}\}/g,""),voice:"",oldOffset:0})}})),n.length?n:null},L=function(e){if(!e)return null;var t=e.map((function(e,t){var n=[];return n.push(t+1),n.push("".concat(k(e.startTime)," --\x3e ").concat(k(e.endTime))),e.voice?n.push("(".concat(e.voice,")").concat(e.text)):n.push(e.text),n.join("\n")}));return t.join("\n\n")},P={convertSrtToCaptions:M,convertCaptionsToSrt:L},_=function(e,t){return("0000"+e).slice(-t)},D=function(e){var t=new Date(2e3,0,1,0,0,0,1e3*e);return[_(t.getHours(),2),_(t.getMinutes(),2),_(t.getSeconds(),2)+"."+_(t.getMilliseconds(),3)].join(":")},B=function(e){if(!e)return null;var t=e.map((function(e){return[e.id,D(e.startTime)+" --\x3e "+D(e.endTime),(e.voice?"<v "+e.voice+">":"")+e.text].join("\n")}));return"WEBVTT\n\n"+t.join("\n\n")},R=function(e){e.sort((function(e,t){return e.startTime===t.startTime?e.endTime===t.endTime?0:e.endTime>t.endTime?1:-1:e.startTime>t.startTime?1:-1}))},A=function(e,t){var n=e.endTime-t.startTime,r=t.endTime-t.startTime;return n>.2||n/r>.3},H=function(e){for(var t=[],n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];r.text===i.text&&A(r,i)?(i.startTime=Math.min(r.startTime,i.startTime),i.endTime=Math.max(r.endTime,i.endTime),t.push(n)):r.startTime===i.startTime&&r.endTime===i.endTime&&(i.text=r.text+"\n"+i.text,t.push(n))}for(var a=t.length-1;a>=0;a--)e.splice(t[a],1)},N=function(e){if(0===e.indexOf("WEBVTT"))return e;var t=I.convertAssToCaptions(e)||P.convertSrtToCaptions(e);return t?(R(t),H(t),B(t)):null},F={convertFileToVtt:N},q=Object(r["w"])("data-v-c54bd324");Object(r["l"])("data-v-c54bd324");var J={class:"subtitle-viewer"};Object(r["j"])();var W=q((function(e,t,n,i,a,o){return Object(r["i"])(),Object(r["d"])("div",J,[(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["p"])(e.text,(function(e,t){return Object(r["i"])(),Object(r["d"])("div",{key:t,"data-test":"line"},Object(r["r"])(e),1)})),128))])})),$=Object(r["g"])({name:"SubtitleViewer",setup:function(){var e=Object(r["h"])(f);if(!e)throw new Error("Could not resolve ".concat(f.description));var t=Object(r["b"])((function(){return e.state.currentCue.text.split("\n")}));return{text:t}}});n("2708");$.render=W,$.__scopeId="data-v-c54bd324";var Q=$,Y=Object(r["w"])("data-v-4d92e2ba");Object(r["l"])("data-v-4d92e2ba");var z={class:"subtitle-tracklist-viewer"};Object(r["j"])();var G=Y((function(e,t,n,i,a,o){var u=Object(r["q"])("SubtitleElement");return Object(r["i"])(),Object(r["d"])("div",z,[(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["p"])(e.cues,(function(e){return Object(r["i"])(),Object(r["d"])(u,{key:e.id,cue:e,"data-test":"subtitle"},null,8,["cue"])})),128))])})),K=Object(r["w"])("data-v-2cac306e");Object(r["l"])("data-v-2cac306e");var X={class:"start-time"},Z=Object(r["f"])("div",{class:"start-time-label","data-test":"startTimeLabel"},"Start Time",-1),ee={class:"end-time"},te=Object(r["f"])("div",{class:"end-time-label","data-test":"endTimeLabel"},"End Time",-1);Object(r["j"])();var ne=K((function(e,t,n,i,a,o){return Object(r["i"])(),Object(r["d"])("div",{ref:"htmlElement",class:["subtitle-element",{active:e.isActive}],onClick:t[4]||(t[4]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[Object(r["f"])("div",{class:["subtitle",{editable:e.isInEditMode}],contenteditable:e.isInEditMode,"data-test":"subtitleTextBox",onInput:t[1]||(t[1]=function(t){return e.updateCueText(t.target.innerText)})},Object(r["r"])(e.cue.text),43,["contenteditable"]),Object(r["u"])(Object(r["f"])("div",X,[Z,Object(r["f"])("input",{title:"Starting time for the subtitle",value:e.cue.startTime,class:"start-time-input",type:"number",step:"0.1","data-test":"startTimeInputBox",onInput:t[2]||(t[2]=function(t){return e.updateStartTime(Number(t.target.value))})},null,40,["value"])],512),[[r["s"],e.isInEditMode]]),Object(r["u"])(Object(r["f"])("div",ee,[te,Object(r["f"])("input",{title:"Ending time for the subtitle",value:e.cue.endTime,class:"end-time-input",type:"number",step:"0.1","data-test":"endTimeInputBox",onInput:t[3]||(t[3]=function(t){return e.updateEndTime(Number(t.target.value))})},null,40,["value"])],512),[[r["s"],e.isInEditMode]])],2)})),re=Object(r["g"])({name:"SubtitleElement",props:{cue:{type:Object,required:!0}},setup:function(e){var t=Object(r["h"])(f);if(!t)throw new Error("Could not resolve ".concat(f.description));var n=Object(r["o"])(),i=Object(r["b"])((function(){return t.state.isInEditMode})),a=Object(r["b"])((function(){return t.state.currentCue.id===e.cue.id}));return Object(r["t"])((function(){return t.state.currentCue}),(function(t){n.value&&t.id===e.cue.id&&n.value.scrollIntoView({behavior:"smooth",block:"center"})})),{htmlElement:n,isInEditMode:i,isActive:a,onClick:function(){i.value||t.updateCurrentTimeEvent(e.cue.startTime+1e-4,l.SubtitleElement)},updateCueText:function(n){t.updateCueTextInCuesList(e.cue.id,n),t.state.currentCue.id===e.cue.id&&t.setCurrentCue(e.cue.id)},updateStartTime:function(n){t.updateCueStartTimeInCuesList(e.cue.id,n)},updateEndTime:function(n){t.updateCueEndTimeInCuesList(e.cue.id,n)}}}});n("f749");re.render=ne,re.__scopeId="data-v-2cac306e";var ie=re,ae=Object(r["g"])({name:"SubtitleTracklistViewer",components:{SubtitleElement:ie},setup:function(){var e=Object(r["h"])(f);if(!e)throw new Error("Could not resolve ".concat(f.description));var t=Object(r["b"])((function(){return e.state.cues}));return{cues:t}}});n("e044");ae.render=G,ae.__scopeId="data-v-4d92e2ba";var oe=ae,ue=Object(r["w"])("data-v-e8b554fa");Object(r["l"])("data-v-e8b554fa");var ce={class:"video-player"},se=Object(r["e"])(" Your browser does not support the video tag ");Object(r["j"])();var de=ue((function(e,t,n,i,a,o){return Object(r["i"])(),Object(r["d"])("div",ce,[Object(r["u"])(Object(r["f"])("video",{ref:"videoElement",class:"video-element",src:e.videoUrl?e.videoUrl:null,crossorigin:"anonymous",controls:"",disablePictureInPicture:"",disabled:"",tabIndex:"-1",onError:t[3]||(t[3]=function(){return e.onVideoError&&e.onVideoError.apply(e,arguments)}),onTimeupdate:t[4]||(t[4]=function(){return e.onTimeUpdate&&e.onTimeUpdate.apply(e,arguments)})},[Object(r["f"])("track",{kind:"subtitles",src:e.subtitlesUrl,default:"",onCuechange:t[1]||(t[1]=function(){return e.onCueChange&&e.onCueChange.apply(e,arguments)}),onLoad:t[2]||(t[2]=function(){return e.onCaptionsLoad&&e.onCaptionsLoad.apply(e,arguments)})},null,40,["src"]),se],40,["src"]),[[r["s"],e.videoUrl]])])})),le=Object(r["g"])({name:"VideoPlayer",props:{videoUrl:{type:String,default:""},subtitlesUrl:{type:String,default:""}},setup:function(e,t){var n=t.emit,i=Object(r["h"])(f);if(!i)throw new Error("Could not resolve ".concat(f.description));var a=Object(r["o"])();return Object(r["t"])((function(){return i.state.currentTimeEvent}),(function(e){a.value&&e.origin!==l.VideoPlayer&&(a.value.currentTime=e.time,a.value.play())})),Object(r["t"])((function(){return i.state.cuesHasBeenChanged}),(function(e){if(e&&a.value&&!(a.value.textTracks.length<1)){var t=a.value.textTracks[0];if(t.cues){var n,r=Object(v["a"])(t.cues);try{var o=function(){var e=n.value,t=i.state.cues.find((function(t){return t.id===e.id}));if(!t)return"continue";e.startTime=t.startTime,e.endTime=t.endTime};for(r.s();!(n=r.n()).done;)o()}catch(u){r.e(u)}finally{r.f()}i.setCuesHasBeenChanged(!1)}}})),{videoElement:a,onCueChange:function(e){var t=e.target;if(t.track.mode="hidden",t.track.activeCues&&t.track.activeCues[0]){var n=t.track.activeCues[0];n&&i.setCurrentCue(n.id)}},onCaptionsLoad:function(e){var t=e.target;if(t.track.mode="hidden",t.track.cues){var n=Object(b["a"])(t.track.cues);i.setCuesList(n)}},onVideoError:function(){a.value&&a.value.error&&n("onVideoError","Error code ".concat(a.value.error.code,". ").concat(a.value.error.message))},onTimeUpdate:function(){a.value&&i.updateCurrentTimeEvent(a.value.currentTime,l.VideoPlayer)}}}});n("35d2");le.render=de,le.__scopeId="data-v-e8b554fa";var be=le,fe=function(e){return/\.(srt|ass)$/.test(e.name)},ve=Object(r["g"])({name:"App",components:{SubtitleViewer:Q,SubtitleTracklistViewer:oe,VideoPlayer:be},setup:function(){Object(r["k"])(f,S);var e=Object(r["o"])(),t=Object(r["o"])(""),n=Object(r["o"])(""),i=Object(r["o"])(""),a=Object(r["o"])(""),o=Object(r["o"])(""),u=function(r){var i=new FileReader;i.readAsText(r),i.onload=function(){var a=F.convertFileToVtt(i.result);if(!a)return t.value="",void(o.value="Failed to parse subtitles (.ass or .srt): ".concat(r.name));n.value="data:text/vtt;charset=utf-8,".concat(encodeURIComponent(a)),t.value=r.name,o.value="",e.value&&(e.value.value=e.value.defaultValue)}},c=function(e){i&&URL.revokeObjectURL(i.value),i.value=URL.createObjectURL(e),a.value=""},s=Object(r["b"])((function(){var e=P.convertCaptionsToSrt(S.state.cues);if(e){var t="srt",n=new Blob([e],{type:t});return URL.createObjectURL(n)}}));return{Store:S,offsetInputElement:e,subtitleFileName:t,subtitlesUrl:n,videoUrl:i,loadVideoError:a,loadSubtitlesError:o,downloadSubtitlesLink:s,onDropEvent:function(e){e.dataTransfer&&Object(b["a"])(e.dataTransfer.files).forEach((function(e){fe(e)?u(e):c(e)}))},onVideoError:function(e){a.value=e}}}});n("1dd6");ve.render=d;var pe=ve;Object(r["c"])(pe).mount("#app")},e044:function(e,t,n){"use strict";n("9c8a")},f749:function(e,t,n){"use strict";n("fb9a")},f975:function(e,t,n){},fb9a:function(e,t,n){}});
//# sourceMappingURL=app.209be136.js.map