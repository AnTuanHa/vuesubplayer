{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?dac2","webpack:///./src/components/SubtitleViewer.vue?4955","webpack:///./src/components/VideoPlayer.vue?9278","webpack:///./src/App.vue","webpack:///./src/interfaces/TimeEvent.ts","webpack:///./src/symbols.ts","webpack:///./src/Store.ts","webpack:///./src/utils/AssSubtitles.ts","webpack:///./src/utils/SrtSubtitles.ts","webpack:///./src/utils/SubtitleParser.ts","webpack:///./src/components/SubtitleViewer.vue","webpack:///./src/components/SubtitleViewer.vue?f0bf","webpack:///./src/components/SubtitleViewer.vue?c24c","webpack:///./src/components/SubtitleTracklistViewer.vue","webpack:///./src/components/SubtitleElement.vue","webpack:///./src/components/SubtitleElement.vue?4bd3","webpack:///./src/components/SubtitleElement.vue?84fb","webpack:///./src/components/SubtitleTracklistViewer.vue?083c","webpack:///./src/components/SubtitleTracklistViewer.vue?d7c5","webpack:///./src/components/VideoPlayer.vue","webpack:///./src/components/VideoPlayer.vue?5fa4","webpack:///./src/components/VideoPlayer.vue?5ebf","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/main.ts","webpack:///./src/components/SubtitleTracklistViewer.vue?6cdd","webpack:///./src/components/SubtitleElement.vue?e683"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","id","onDropEvent","videoUrl","subtitlesUrl","loadVideoError","loadSubtitlesError","video-url","subtitles-url","onVideoError","Store","toggleEditMode","state","isInEditMode","download","subtitleFileName","href","downloadSubtitlesLink","ref","title","placeholder","type","step","offsetAllSubtitles","$event","target","Origin","StoreKey","cues","currentCue","startTime","endTime","text","voice","oldOffset","currentTimeEvent","time","origin","VideoPlayer","cuesHasBeenChanged","setCuesHasBeenChanged","flag","cue","updateCueTextInCuesList","find","updateCueStartTimeInCuesList","updateCueEndTimeInCuesList","setCurrentCue","updateCurrentTimeEvent","offset","Number","setCuesList","getSeconds","timeRegex","match","Math","round","parseInt","convertAssToCaptions","reAss","RegExp","styleRegex","lines","split","captions","forEach","line","index","replace","trim","padWithZeros","num","digits","formatTime","seconds","date","Date","max","getHours","getMinutes","getMilliseconds","join","timeStr","convertSrtToCaptions","test","entries","entry","timestamps","convertCaptionsToSrt","map","caption","convertCaptionsToVtt","sortCaptionsByTime","sort","a","b","isOverlapping","leftCaption","rightCaption","leftCaptionContainedInRightCaptionDuration","rightCaptionDuration","mergeDuplicateCaptions","duplicateCaptionIndices","nextCaption","min","indexOf","AssSubtitles","SrtSubtitles","convertFileToVtt","data-test","setup","store","Error","description","render","__scopeId","isActive","onClick","contenteditable","updateCueText","innerText","updateStartTime","updateEndTime","props","required","htmlElement","newCue","scrollIntoView","behavior","block","SubtitleElement","components","src","crossorigin","controls","disablePictureInPicture","disabled","tabIndex","onTimeUpdate","kind","default","onCueChange","onCaptionsLoad","String","_","emit","videoElement","newTimeEvent","currentTime","play","textTracks","firstTextTrack","trackCue","e","element","track","activeCues","firstActiveCue","trackCues","error","code","message","isSubtitleFile","file","SubtitleViewer","SubtitleTracklistViewer","offsetInputElement","loadSubtitleFile","reader","FileReader","readAsText","onload","vtt","SubtitleParser","encodeURIComponent","defaultValue","loadVideoFile","URL","revokeObjectURL","createObjectURL","fileType","blob","Blob","dataTransfer","files","App","mount"],"mappings":"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","file":"js/app.209be136.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vuesubplayer/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=1247e2c7&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SubtitleViewer.vue?vue&type=style&index=0&id=c54bd324&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VideoPlayer.vue?vue&type=style&index=0&id=e8b554fa&scoped=true&lang=css\"","<template>\n  <div id=\"app\" @drop.prevent.stop=\"onDropEvent\" @dragover.prevent.stop>\n    <div\n      v-show=\"!videoUrl && !subtitlesUrl\"\n      class=\"video-subtitles-missing hint\"\n    >\n      Drag and drop a video file supported by your browser and subtitles file\n      (.srt, .ass) on this page\n    </div>\n    <div\n      v-show=\"!videoUrl && subtitlesUrl && !loadVideoError\"\n      class=\"video-missing hint\"\n    >\n      Drag and drop a video file supported by your browser on this page\n    </div>\n    <div\n      v-show=\"videoUrl && !subtitlesUrl && !loadSubtitlesError\"\n      class=\"subtitles-missing hint\"\n    >\n      Drag and drop a subtitles file (.srt, .ass) on this page\n    </div>\n    <div v-show=\"loadVideoError\" class=\"video-load-error hint\">\n      {{ loadVideoError }}\n    </div>\n    <div v-show=\"loadSubtitlesError\" class=\"subtitles-load-error hint\">\n      {{ loadSubtitlesError }}\n    </div>\n    <div v-show=\"videoUrl && !loadVideoError\" class=\"app-main\">\n      <VideoPlayer\n        :video-url=\"videoUrl\"\n        :subtitles-url=\"subtitlesUrl\"\n        @on-video-error=\"onVideoError\"\n      />\n      <SubtitleViewer />\n    </div>\n    <div v-show=\"subtitlesUrl && !loadSubtitlesError\" class=\"app-aside\">\n      <SubtitleTracklistViewer />\n    </div>\n    <div v-show=\"subtitlesUrl && !loadSubtitlesError\" class=\"controls\">\n      <div\n        class=\"edit-subtitles-button unselectable\"\n        @click=\"Store.toggleEditMode()\"\n      >\n        {{ Store.state.isInEditMode ? \"Quit\" : \"Edit Subtitles\" }}\n      </div>\n      <a\n        v-show=\"!Store.state.isInEditMode\"\n        class=\"download-subtitles-button unselectable\"\n        :download=\"subtitleFileName\"\n        :href=\"downloadSubtitlesLink\"\n      >\n        Download Subtitles\n      </a>\n      <input\n        v-show=\"Store.state.isInEditMode\"\n        ref=\"offsetInputElement\"\n        title=\"Offset all subtitles by the specified value\"\n        class=\"offset-input\"\n        placeholder=\"Offset all subtitles\"\n        type=\"number\"\n        step=\"0.1\"\n        @input=\"Store.offsetAllSubtitles($event.target.value)\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, provide, ref } from \"vue\";\nimport { StoreKey } from \"./symbols\";\nimport Store from \"./Store\";\nimport SubtitleParser from \"./utils/SubtitleParser\";\nimport SrtSubtitles from \"./utils/SrtSubtitles\";\n\nimport SubtitleViewer from \"./components/SubtitleViewer.vue\";\nimport SubtitleTracklistViewer from \"./components/SubtitleTracklistViewer.vue\";\nimport VideoPlayer from \"./components/VideoPlayer.vue\";\n\nconst isSubtitleFile = function(file: File) {\n  return /\\.(srt|ass)$/.test(file.name);\n};\n\nexport default defineComponent({\n  name: \"App\",\n\n  components: {\n    SubtitleViewer,\n    SubtitleTracklistViewer,\n    VideoPlayer\n  },\n\n  setup() {\n    provide(StoreKey, Store);\n    const offsetInputElement = ref<HTMLInputElement>();\n\n    const subtitleFileName = ref(\"\");\n    const subtitlesUrl = ref(\"\");\n    const videoUrl = ref(\"\");\n    const loadVideoError = ref(\"\");\n    const loadSubtitlesError = ref(\"\");\n\n    const loadSubtitleFile = (file: File) => {\n      const reader = new FileReader();\n      reader.readAsText(file);\n      reader.onload = () => {\n        const vtt = SubtitleParser.convertFileToVtt(reader.result as string);\n        if (!vtt) {\n          subtitleFileName.value = \"\";\n          loadSubtitlesError.value = `Failed to parse subtitles (.ass or .srt): ${file.name}`;\n          return;\n        }\n        subtitlesUrl.value = `data:text/vtt;charset=utf-8,${encodeURIComponent(\n          vtt\n        )}`;\n        subtitleFileName.value = file.name;\n        loadSubtitlesError.value = \"\";\n\n        if (!offsetInputElement.value) {\n          return;\n        }\n        offsetInputElement.value.value = offsetInputElement.value.defaultValue;\n      };\n    };\n\n    const loadVideoFile = (file: File) => {\n      if (videoUrl) {\n        URL.revokeObjectURL(videoUrl.value);\n      }\n      videoUrl.value = URL.createObjectURL(file);\n      loadVideoError.value = \"\";\n    };\n\n    const downloadSubtitlesLink = computed(() => {\n      const text = SrtSubtitles.convertCaptionsToSrt(Store.state.cues);\n      if (!text) {\n        return;\n      }\n      const fileType = \"srt\";\n      const blob = new Blob([text], { type: fileType });\n      return URL.createObjectURL(blob);\n    });\n\n    return {\n      Store,\n      offsetInputElement,\n      subtitleFileName,\n      subtitlesUrl,\n      videoUrl,\n      loadVideoError,\n      loadSubtitlesError,\n      downloadSubtitlesLink,\n      onDropEvent: (e: DragEvent) => {\n        if (!e.dataTransfer) {\n          return;\n        }\n        [...e.dataTransfer.files].forEach(file => {\n          isSubtitleFile(file) ? loadSubtitleFile(file) : loadVideoFile(file);\n        });\n      },\n      onVideoError: (message: string) => {\n        loadVideoError.value = message;\n      }\n    };\n  }\n});\n</script>\n\n<style>\nhtml,\nbody {\n  margin: 0;\n  height: 100vh;\n}\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n  display: grid;\n  grid-template-areas:\n    \"video video subtitles\"\n    \"video video subtitles\"\n    \"video video subtitles\"\n    \"video video controls\";\n  grid-template-rows: 95.4% 1% 0% 3.6%;\n  grid-template-columns: 87% 0 13%;\n  position: relative;\n  background-color: black;\n}\n\n.app-main {\n  grid-area: video;\n  position: relative;\n}\n\n.app-aside {\n  grid-area: subtitles;\n  position: relative;\n}\n\n.controls {\n  grid-area: controls;\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-areas: \"item1 item2\";\n  grid-template-rows: auto;\n  grid-template-columns: 1fr auto;\n}\n\n.video-subtitles-missing {\n  grid-area: video;\n}\n\n.video-missing {\n  grid-area: video;\n}\n\n.subtitles-missing {\n  grid-area: subtitles;\n}\n\n.video-load-error {\n  grid-area: video;\n}\n\n.subtitles-load-error {\n  grid-area: subtitles;\n  word-wrap: break-word;\n}\n\n.hint {\n  color: white;\n  font-size: 24px;\n  position: absolute;\n  top: 20%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 90%;\n  max-width: 600px;\n  text-align: center;\n}\n\n.edit-subtitles-button {\n  grid-area: item1;\n}\n\n.download-subtitles-button {\n  grid-area: item2;\n  text-decoration: none;\n}\n\n.edit-subtitles-button,\n.download-subtitles-button {\n  font-size: 1.5vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  cursor: pointer;\n  background-color: black;\n  color: #444444;\n  padding: 0.5vh;\n}\n\n.edit-subtitles-button:hover,\n.download-subtitles-button:hover {\n  background-color: #102027;\n  color: white;\n}\n\n.unselectable {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.offset-input {\n  grid-area: item2;\n  width: 100%;\n}\n</style>\n","export enum Origin {\n  VideoPlayer,\n  SubtitleElement\n}\n\nexport default interface TimeEvent {\n  time: number;\n  origin: Origin;\n}\n","import { InjectionKey } from \"vue\";\nimport Store from \"./interfaces/Store\";\n\nexport const StoreKey: InjectionKey<Store> = Symbol(\"Store\");\n","import { reactive, readonly } from \"vue\";\nimport State from \"./interfaces/State\";\nimport TimeEvent, { Origin } from \"./interfaces/TimeEvent\";\nimport Caption from \"./interfaces/Caption\";\n\nconst state: State = reactive({\n  cues: [] as Caption[],\n  currentCue: {\n    id: \"0\",\n    startTime: 0,\n    endTime: 0,\n    text: \"\",\n    voice: \"\",\n    oldOffset: 0\n  } as Caption,\n  currentTimeEvent: {\n    time: 0,\n    origin: Origin.VideoPlayer\n  } as TimeEvent,\n  isInEditMode: false,\n  cuesHasBeenChanged: false\n});\n\nconst setCuesHasBeenChanged = function(flag: boolean) {\n  state.cuesHasBeenChanged = flag;\n};\n\nconst setCuesList = function(cues: VTTCue[]) {\n  state.cues = [];\n  for (const cue of cues) {\n    state.cues.push({\n      id: cue.id,\n      startTime: cue.startTime,\n      endTime: cue.endTime,\n      text: cue.text,\n      voice: \"\",\n      oldOffset: 0\n    });\n  }\n};\n\nconst updateCueTextInCuesList = function(id: string, text: string) {\n  const cue = state.cues.find(cue => cue.id === id);\n  if (!cue) {\n    return;\n  }\n  cue.text = text;\n  setCuesHasBeenChanged(true);\n};\n\nconst updateCueStartTimeInCuesList = function(id: string, startTime: number) {\n  const cue = state.cues.find(cue => cue.id === id);\n  if (!cue) {\n    return;\n  }\n  cue.startTime = startTime;\n  setCuesHasBeenChanged(true);\n};\n\nconst updateCueEndTimeInCuesList = function(id: string, endTime: number) {\n  const cue = state.cues.find(cue => cue.id === id);\n  if (!cue) {\n    return;\n  }\n  cue.endTime = endTime;\n  setCuesHasBeenChanged(true);\n};\n\nconst setCurrentCue = function(id: string) {\n  const cue = state.cues.find(cue => cue.id === id);\n  if (!cue) {\n    return;\n  }\n  state.currentCue = cue;\n};\n\nconst updateCurrentTimeEvent = function(time: number, origin: Origin) {\n  state.currentTimeEvent = {\n    time,\n    origin\n  };\n};\n\nconst toggleEditMode = function() {\n  state.isInEditMode = state.isInEditMode ? false : true;\n};\n\nconst offsetAllSubtitles = function(offset: number) {\n  for (const cue of state.cues) {\n    cue.startTime += Number(offset) - cue.oldOffset;\n    cue.endTime += Number(offset) - cue.oldOffset;\n    cue.oldOffset = offset;\n  }\n  setCuesHasBeenChanged(true);\n};\n\nexport default {\n  state: readonly(state),\n  setCuesHasBeenChanged,\n  setCuesList,\n  updateCueTextInCuesList,\n  updateCueStartTimeInCuesList,\n  updateCueEndTimeInCuesList,\n  setCurrentCue,\n  updateCurrentTimeEvent,\n  toggleEditMode,\n  offsetAllSubtitles\n};\n","import Caption from \"@/interfaces/Caption\";\n\nconst getSeconds = (time: string, timeRegex: RegExp) => {\n  const match = time.match(timeRegex);\n  if (!match) {\n    return 0;\n  }\n  return (\n    Math.round(\n      parseInt(match[1], 10) * 60 * 60 * 1000 + // Hours to milliseconds\n      parseInt(match[2], 10) * 60 * 1000 + // Minutes to milliseconds\n      parseInt(match[3], 10) * 1000 + // Seconds to milliseconds\n        parseInt(match[4], 10) * 10 // Milliseconds (only 2 decimals in this format)\n    ) / 1000 // To seconds\n  );\n};\n\nconst convertAssToCaptions = (text: string) => {\n  /* Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text\n   *\n   * We are searching for lines that look like:\n   * Dialogue: 0,0:00:05.30,0:00:13.04,Default,,0,0,0,,{\\pos(796,1018)}My first line\\N\n   * Dialogue: 0,0:00:13.04,0:00:15.24,Default,,0,0,0,,{\\pos(756,1018)}My second line\\N\n   * Dialogue: 0,0:00:19.58,0:00:22.38,Default,,0,0,0,,{\\pos(556,1018)}My third line\\N\n   * Dialogue: 0,0:00:25.42,0:00:29.06,Default,,0,0,0,,{\\pos(676,1018)}My fourth line\\N\n   */\n  const reAss = new RegExp(\n    \"Dialogue:\\\\s\\\\d,\" + // Format: Layer\n    \"(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),\" + // Start\n    \"(\\\\d+:\\\\d\\\\d:\\\\d\\\\d.\\\\d\\\\d),\" + // End\n    \"([^,]*),\" + // Style\n    \"([^,]*),\" + // Name\n    \"(?:[^,]*,){4}\" + // MarginL, MarginR, MarginV, Effect\n      \"(.*)$\", // Text\n    \"i\" // case-insensitive mode\n  );\n\n  // H:MM:SS.MM\n  // Hour:Minutes:Seconds.Milliseconds\n  const timeRegex = /(\\d+):(\\d\\d):(\\d\\d).(\\d\\d)/;\n  const styleRegex = /\\{[^}]+\\}/g;\n\n  const lines = text.split(/[\\n\\r]+/g);\n  const captions: Caption[] = [];\n  lines.forEach((line, index) => {\n    const match = line.match(reAss);\n    if (match) {\n      captions.push({\n        id: `${index + 1}`,\n        startTime: getSeconds(match[1], timeRegex),\n        endTime: getSeconds(match[2], timeRegex),\n        text: match[5]\n          .replace(styleRegex, \"\")\n          .replace(/\\\\N/gi, \"\\n\")\n          .trim(),\n        voice: match[3] && match[4] ? match[3] + \" \" + match[4] : \"\",\n        oldOffset: 0\n      });\n    }\n  });\n\n  return captions.length ? captions : null;\n};\n\nexport default {\n  convertAssToCaptions\n};\n","import Caption from \"@/interfaces/Caption\";\n\nconst padWithZeros = (num: number, digits: number) => {\n  return (\"0000\" + num).slice(-digits);\n};\n\nconst formatTime = (seconds: number) => {\n  const date = new Date(2000, 0, 1, 0, 0, 0, Math.max(0, seconds) * 1000);\n  return [\n    padWithZeros(date.getHours(), 2),\n    padWithZeros(date.getMinutes(), 2),\n    padWithZeros(date.getSeconds(), 2) +\n      \",\" +\n      padWithZeros(date.getMilliseconds(), 3)\n  ].join(\":\");\n};\n\nconst getSeconds = (timeStr: string, timeRegex: RegExp) => {\n  const match = timeStr.match(timeRegex);\n  if (!match) {\n    return 0;\n  }\n  return (\n    Math.round(\n      parseInt(match[1], 10) * 60 * 60 * 1000 + // Hours to milliseconds\n      parseInt(match[2], 10) * 60 * 1000 + // Minutes to milliseconds\n      parseInt(match[3], 10) * 1000 + // Seconds to milliseconds\n        parseInt(match[4], 10) // Milliseconds\n    ) / 1000 // To seconds\n  );\n};\n\nconst convertSrtToCaptions = (text: string) => {\n  text = text.replace(/\\r/g, \"\");\n\n  // HH:MM:SS,MMM\n  // Hours:Minutes:Seconds,Milliseconds\n  const timeRegex = /(\\d\\d):(\\d\\d):(\\d\\d),(\\d\\d\\d)/;\n\n  if (!timeRegex.test(text)) {\n    return null;\n  }\n\n  const captions: Caption[] = [];\n  const entries = text.split(/\\n[\\n]+(?=[0-9]+\\n)/g);\n  entries.forEach(entry => {\n    const lines = entry.split(/\\n+/g);\n    /* Proper SRT files have entries that look like:\n     * 1\n     * 00:00:12,137 --> 00:00:13,680\n     * My first line\n     *\n     * 2\n     * 00:00:14,597 --> 00:00:16,933\n     * My second line\n     * My third line\n     *\n     * That is, each caption should have 3 or more lines\n     */\n    if (lines.length >= 3) {\n      const timestamps = lines[1].split(/\\s*-->\\s*/);\n      captions.push({\n        id: lines[0],\n        startTime: getSeconds(timestamps[0], timeRegex),\n        endTime: getSeconds(timestamps[1], timeRegex),\n        text: lines\n          .slice(2)\n          .join(\"\\n\")\n          .replace(/\\{\\\\an[0-9]{1,2}\\}/g, \"\"),\n        voice: \"\",\n        oldOffset: 0\n      });\n    }\n  });\n\n  return captions.length ? captions : null;\n};\n\nconst convertCaptionsToSrt = (captions: readonly Caption[]) => {\n  if (!captions) {\n    return null;\n  }\n\n  const lines = captions.map((caption, index) => {\n    const line = [];\n    line.push(index + 1);\n    line.push(\n      `${formatTime(caption.startTime)} --> ${formatTime(caption.endTime)}`\n    );\n    if (caption.voice) {\n      line.push(`(${caption.voice})${caption.text}`);\n    } else {\n      line.push(caption.text);\n    }\n    return line.join(\"\\n\");\n  });\n\n  return lines.join(\"\\n\\n\");\n};\n\nexport default {\n  convertSrtToCaptions,\n  convertCaptionsToSrt\n};\n","import Caption from \"@/interfaces/Caption\";\nimport AssSubtitles from \"./AssSubtitles\";\nimport SrtSubtitles from \"./SrtSubtitles\";\n\nconst padWithZeros = (num: number, digits: number) => {\n  return (\"0000\" + num).slice(-digits);\n};\n\nconst formatTime = (seconds: number) => {\n  const date = new Date(2000, 0, 1, 0, 0, 0, seconds * 1000);\n  return [\n    padWithZeros(date.getHours(), 2),\n    padWithZeros(date.getMinutes(), 2),\n    padWithZeros(date.getSeconds(), 2) +\n      \".\" +\n      padWithZeros(date.getMilliseconds(), 3)\n  ].join(\":\");\n};\n\n// For the format of WEBVTT, see: https://developer.mozilla.org/en-US/docs/Web/API/WebVTT_API\nconst convertCaptionsToVtt = (captions: Caption[]) => {\n  if (!captions) {\n    return null;\n  }\n\n  const lines = captions.map((caption: Caption) => {\n    return [\n      caption.id,\n      formatTime(caption.startTime) + \" --> \" + formatTime(caption.endTime),\n      (caption.voice ? \"<v \" + caption.voice + \">\" : \"\") + caption.text\n    ].join(\"\\n\");\n  });\n\n  return \"WEBVTT\\n\\n\" + lines.join(\"\\n\\n\");\n};\n\nconst sortCaptionsByTime = (captions: Caption[]) => {\n  captions.sort((a, b) => {\n    if (a.startTime === b.startTime) {\n      if (a.endTime === b.endTime) {\n        return 0;\n      }\n      return a.endTime > b.endTime ? 1 : -1;\n    }\n    return a.startTime > b.startTime ? 1 : -1;\n  });\n};\n\nconst isOverlapping = (leftCaption: Caption, rightCaption: Caption) => {\n  const leftCaptionContainedInRightCaptionDuration =\n    leftCaption.endTime - rightCaption.startTime;\n  const rightCaptionDuration = rightCaption.endTime - rightCaption.startTime;\n  return (\n    leftCaptionContainedInRightCaptionDuration > 0.2 ||\n    leftCaptionContainedInRightCaptionDuration / rightCaptionDuration > 0.3\n  );\n};\n\nconst mergeDuplicateCaptions = (captions: Caption[]) => {\n  const duplicateCaptionIndices = [];\n  for (let i = 0; i < captions.length - 1; i++) {\n    const caption = captions[i];\n    const nextCaption = captions[i + 1];\n    if (\n      caption.text === nextCaption.text &&\n      isOverlapping(caption, nextCaption)\n    ) {\n      nextCaption.startTime = Math.min(\n        caption.startTime,\n        nextCaption.startTime\n      );\n      nextCaption.endTime = Math.max(caption.endTime, nextCaption.endTime);\n      duplicateCaptionIndices.push(i);\n    } else if (\n      caption.startTime === nextCaption.startTime &&\n      caption.endTime === nextCaption.endTime\n    ) {\n      nextCaption.text = caption.text + \"\\n\" + nextCaption.text;\n      duplicateCaptionIndices.push(i);\n    }\n  }\n\n  for (let i = duplicateCaptionIndices.length - 1; i >= 0; i--)\n    captions.splice(duplicateCaptionIndices[i], 1);\n};\n\nconst convertFileToVtt = (text: string) => {\n  if (text.indexOf(\"WEBVTT\") === 0) {\n    return text;\n  }\n\n  const captions =\n    AssSubtitles.convertAssToCaptions(text) ||\n    SrtSubtitles.convertSrtToCaptions(text);\n  if (!captions) {\n    return null;\n  }\n  sortCaptionsByTime(captions);\n  mergeDuplicateCaptions(captions);\n\n  return convertCaptionsToVtt(captions);\n};\n\nexport default {\n  convertFileToVtt\n};\n","<template>\n  <div class=\"subtitle-viewer\">\n    <div v-for=\"(line, index) in text\" :key=\"index\" data-test=\"line\">\n      {{ line }}\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject } from \"vue\";\nimport { StoreKey } from \"@/symbols\";\n\nexport default defineComponent({\n  name: \"SubtitleViewer\",\n  setup() {\n    const store = inject(StoreKey);\n    if (!store) {\n      throw new Error(`Could not resolve ${StoreKey.description}`);\n    }\n\n    const text = computed(() => store.state.currentCue.text.split(\"\\n\"));\n\n    return {\n      text\n    };\n  }\n});\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.subtitle-viewer {\n  font-size: 2.5vw;\n  text-align: center;\n  color: #ffffff;\n  position: absolute;\n  width: max-content;\n  max-width: 82%;\n  bottom: 10%;\n  left: 50%;\n  -webkit-transform: translate(-50%, 0%);\n  transform: translate(-50%, 0%);\n  z-index: 2;\n  background-color: rgba(0, 0, 0, 0.7);\n  padding: 5px 25px;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n</style>\n","\nimport { computed, defineComponent, inject } from \"vue\";\nimport { StoreKey } from \"@/symbols\";\n\nexport default defineComponent({\n  name: \"SubtitleViewer\",\n  setup() {\n    const store = inject(StoreKey);\n    if (!store) {\n      throw new Error(`Could not resolve ${StoreKey.description}`);\n    }\n\n    const text = computed(() => store.state.currentCue.text.split(\"\\n\"));\n\n    return {\n      text\n    };\n  }\n});\n","import { render } from \"./SubtitleViewer.vue?vue&type=template&id=c54bd324&scoped=true\"\nimport script from \"./SubtitleViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./SubtitleViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./SubtitleViewer.vue?vue&type=style&index=0&id=c54bd324&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-c54bd324\"\n\nexport default script","<template>\n  <div class=\"subtitle-tracklist-viewer\">\n    <SubtitleElement\n      v-for=\"cue in cues\"\n      :key=\"cue.id\"\n      :cue=\"cue\"\n      data-test=\"subtitle\"\n    >\n    </SubtitleElement>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject } from \"vue\";\nimport { StoreKey } from \"@/symbols\";\n\nimport SubtitleElement from \"./SubtitleElement.vue\";\n\nexport default defineComponent({\n  name: \"SubtitleTracklistViewer\",\n\n  components: {\n    SubtitleElement\n  },\n\n  setup() {\n    const store = inject(StoreKey);\n    if (!store) {\n      throw new Error(`Could not resolve ${StoreKey.description}`);\n    }\n\n    const cues = computed(() => store.state.cues);\n    return {\n      cues\n    };\n  }\n});\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.subtitle-tracklist-viewer {\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  background-color: black;\n  color: #444444;\n}\n</style>\n","<template>\n  <div\n    ref=\"htmlElement\"\n    class=\"subtitle-element\"\n    :class=\"{ active: isActive }\"\n    @click=\"onClick\"\n  >\n    <div\n      class=\"subtitle\"\n      :class=\"{ editable: isInEditMode }\"\n      :contenteditable=\"isInEditMode\"\n      data-test=\"subtitleTextBox\"\n      @input=\"updateCueText($event.target.innerText)\"\n    >\n      {{ cue.text }}\n    </div>\n    <div v-show=\"isInEditMode\" class=\"start-time\">\n      <div class=\"start-time-label\" data-test=\"startTimeLabel\">Start Time</div>\n      <input\n        title=\"Starting time for the subtitle\"\n        :value=\"cue.startTime\"\n        class=\"start-time-input\"\n        type=\"number\"\n        step=\"0.1\"\n        data-test=\"startTimeInputBox\"\n        @input=\"updateStartTime(Number($event.target.value))\"\n      />\n    </div>\n    <div v-show=\"isInEditMode\" class=\"end-time\">\n      <div class=\"end-time-label\" data-test=\"endTimeLabel\">End Time</div>\n      <input\n        title=\"Ending time for the subtitle\"\n        :value=\"cue.endTime\"\n        class=\"end-time-input\"\n        type=\"number\"\n        step=\"0.1\"\n        data-test=\"endTimeInputBox\"\n        @input=\"updateEndTime(Number($event.target.value))\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, ref, defineComponent, inject, watch, PropType } from \"vue\";\nimport { StoreKey } from \"@/symbols\";\nimport { Origin } from \"@/interfaces/TimeEvent\";\nimport Caption from \"@/interfaces/Caption\";\n\nexport default defineComponent({\n  name: \"SubtitleElement\",\n\n  props: {\n    cue: {\n      type: Object as PropType<Caption>,\n      required: true\n    }\n  },\n\n  setup(props) {\n    const store = inject(StoreKey);\n    if (!store) {\n      throw new Error(`Could not resolve ${StoreKey.description}`);\n    }\n    const htmlElement = ref<HTMLElement>();\n\n    const isInEditMode = computed(() => store.state.isInEditMode);\n    const isActive = computed(() => store.state.currentCue.id === props.cue.id);\n\n    watch(\n      () => store.state.currentCue,\n      newCue => {\n        if (!htmlElement.value) {\n          return;\n        }\n        if (newCue.id !== props.cue.id) {\n          return;\n        }\n        htmlElement.value.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\"\n        });\n      }\n    );\n\n    return {\n      htmlElement,\n      isInEditMode,\n      isActive,\n      onClick: () => {\n        if (isInEditMode.value) {\n          return;\n        }\n\n        // Add a small delta so that the tracklist selects the correct caption\n        // if the user clicks on a subtitle that is timed too close to another one\n        store.updateCurrentTimeEvent(\n          props.cue.startTime + 0.0001,\n          Origin.SubtitleElement\n        );\n      },\n      updateCueText: (text: string) => {\n        store.updateCueTextInCuesList(props.cue.id, text);\n\n        if (store.state.currentCue.id !== props.cue.id) {\n          return;\n        }\n        store.setCurrentCue(props.cue.id);\n      },\n      updateStartTime: (time: number) => {\n        store.updateCueStartTimeInCuesList(props.cue.id, time);\n      },\n      updateEndTime: (time: number) => {\n        store.updateCueEndTimeInCuesList(props.cue.id, time);\n      }\n    };\n  }\n});\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\ninput {\n  background-color: black;\n  color: #444444;\n}\n\n.subtitle-element {\n  cursor: pointer;\n  margin: 0;\n  padding: 1em;\n  display: grid;\n  grid-template-areas:\n    \"text text\"\n    \"startTimeLabel endTimeLabel\"\n    \"startTimeLabel endTimeInput\";\n  grid-template-rows: auto auto auto;\n  grid-template-columns: auto auto;\n}\n\n.subtitle {\n  font-size: 1vw;\n  grid-area: text;\n}\n\n.subtitle-element:hover,\n.subtitle-element:hover input {\n  background-color: #102027;\n  color: white;\n}\n\n.active,\n.active input {\n  background-color: #37474f;\n  color: white;\n}\n\n.editable {\n  border: 2px solid;\n  border-radius: 5px;\n}\n\n.start-time-label {\n  grid-area: startTimeLabel;\n}\n\n.start-time-input {\n  grid-area: startTimeInput;\n  width: 100%;\n}\n\n.end-time-label {\n  grid-area: endTimeLabel;\n}\n\n.end-time-input {\n  grid-area: endTimeInput;\n  width: 100%;\n}\n</style>\n","\nimport { computed, ref, defineComponent, inject, watch, PropType } from \"vue\";\nimport { StoreKey } from \"@/symbols\";\nimport { Origin } from \"@/interfaces/TimeEvent\";\nimport Caption from \"@/interfaces/Caption\";\n\nexport default defineComponent({\n  name: \"SubtitleElement\",\n\n  props: {\n    cue: {\n      type: Object as PropType<Caption>,\n      required: true\n    }\n  },\n\n  setup(props) {\n    const store = inject(StoreKey);\n    if (!store) {\n      throw new Error(`Could not resolve ${StoreKey.description}`);\n    }\n    const htmlElement = ref<HTMLElement>();\n\n    const isInEditMode = computed(() => store.state.isInEditMode);\n    const isActive = computed(() => store.state.currentCue.id === props.cue.id);\n\n    watch(\n      () => store.state.currentCue,\n      newCue => {\n        if (!htmlElement.value) {\n          return;\n        }\n        if (newCue.id !== props.cue.id) {\n          return;\n        }\n        htmlElement.value.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\"\n        });\n      }\n    );\n\n    return {\n      htmlElement,\n      isInEditMode,\n      isActive,\n      onClick: () => {\n        if (isInEditMode.value) {\n          return;\n        }\n\n        // Add a small delta so that the tracklist selects the correct caption\n        // if the user clicks on a subtitle that is timed too close to another one\n        store.updateCurrentTimeEvent(\n          props.cue.startTime + 0.0001,\n          Origin.SubtitleElement\n        );\n      },\n      updateCueText: (text: string) => {\n        store.updateCueTextInCuesList(props.cue.id, text);\n\n        if (store.state.currentCue.id !== props.cue.id) {\n          return;\n        }\n        store.setCurrentCue(props.cue.id);\n      },\n      updateStartTime: (time: number) => {\n        store.updateCueStartTimeInCuesList(props.cue.id, time);\n      },\n      updateEndTime: (time: number) => {\n        store.updateCueEndTimeInCuesList(props.cue.id, time);\n      }\n    };\n  }\n});\n","import { render } from \"./SubtitleElement.vue?vue&type=template&id=2cac306e&scoped=true\"\nimport script from \"./SubtitleElement.vue?vue&type=script&lang=ts\"\nexport * from \"./SubtitleElement.vue?vue&type=script&lang=ts\"\n\nimport \"./SubtitleElement.vue?vue&type=style&index=0&id=2cac306e&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-2cac306e\"\n\nexport default script","\nimport { computed, defineComponent, inject } from \"vue\";\nimport { StoreKey } from \"@/symbols\";\n\nimport SubtitleElement from \"./SubtitleElement.vue\";\n\nexport default defineComponent({\n  name: \"SubtitleTracklistViewer\",\n\n  components: {\n    SubtitleElement\n  },\n\n  setup() {\n    const store = inject(StoreKey);\n    if (!store) {\n      throw new Error(`Could not resolve ${StoreKey.description}`);\n    }\n\n    const cues = computed(() => store.state.cues);\n    return {\n      cues\n    };\n  }\n});\n","import { render } from \"./SubtitleTracklistViewer.vue?vue&type=template&id=4d92e2ba&scoped=true\"\nimport script from \"./SubtitleTracklistViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./SubtitleTracklistViewer.vue?vue&type=script&lang=ts\"\n\nimport \"./SubtitleTracklistViewer.vue?vue&type=style&index=0&id=4d92e2ba&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-4d92e2ba\"\n\nexport default script","<template>\n  <div class=\"video-player\">\n    <video\n      v-show=\"videoUrl\"\n      ref=\"videoElement\"\n      class=\"video-element\"\n      :src=\"videoUrl ? videoUrl : null\"\n      crossorigin=\"anonymous\"\n      controls\n      disablePictureInPicture\n      disabled\n      tabIndex=\"-1\"\n      @error=\"onVideoError\"\n      @timeupdate=\"onTimeUpdate\"\n    >\n      <track\n        kind=\"subtitles\"\n        :src=\"subtitlesUrl\"\n        default\n        @cuechange=\"onCueChange\"\n        @load=\"onCaptionsLoad\"\n      />\n      Your browser does not support the video tag\n    </video>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, ref, watch } from \"vue\";\nimport { StoreKey } from \"@/symbols\";\nimport { Origin } from \"@/interfaces/TimeEvent\";\n\nexport default defineComponent({\n  name: \"VideoPlayer\",\n\n  props: {\n    videoUrl: {\n      type: String,\n      default: \"\"\n    },\n    subtitlesUrl: {\n      type: String,\n      default: \"\"\n    }\n  },\n\n  setup(_, { emit }) {\n    const store = inject(StoreKey);\n    if (!store) {\n      throw new Error(`Could not resolve ${StoreKey.description}`);\n    }\n    const videoElement = ref<HTMLVideoElement>();\n\n    watch(\n      () => store.state.currentTimeEvent,\n      newTimeEvent => {\n        if (!videoElement.value) {\n          return;\n        }\n        if (newTimeEvent.origin === Origin.VideoPlayer) {\n          return;\n        }\n        videoElement.value.currentTime = newTimeEvent.time;\n        videoElement.value.play();\n      }\n    );\n\n    // Update videoElement's text track cues with our internal cues list when it has been changed\n    watch(\n      () => store.state.cuesHasBeenChanged,\n      cuesHasBeenChanged => {\n        if (\n          !cuesHasBeenChanged ||\n          !videoElement.value ||\n          videoElement.value.textTracks.length < 1\n        ) {\n          return;\n        }\n        const firstTextTrack = videoElement.value.textTracks[0];\n        if (!firstTextTrack.cues) {\n          return;\n        }\n        for (const trackCue of firstTextTrack.cues) {\n          const cue = store.state.cues.find(cue => cue.id === trackCue.id);\n          if (!cue) {\n            continue;\n          }\n          trackCue.startTime = cue.startTime;\n          trackCue.endTime = cue.endTime;\n        }\n        store.setCuesHasBeenChanged(false);\n      }\n    );\n\n    return {\n      videoElement,\n\n      onCueChange: (e: Event) => {\n        // Hide the built-in captions\n        const element = e.target as HTMLTrackElement;\n        element.track.mode = \"hidden\";\n        if (!element.track.activeCues || !element.track.activeCues[0]) {\n          return;\n        }\n        const firstActiveCue = element.track.activeCues[0];\n        if (!firstActiveCue) {\n          return;\n        }\n        store.setCurrentCue(firstActiveCue.id);\n      },\n\n      onCaptionsLoad: (e: Event) => {\n        // Hide the built-in captions\n        const element = e.target as HTMLTrackElement;\n        element.track.mode = \"hidden\";\n        if (!element.track.cues) {\n          return;\n        }\n        const trackCues = [...element.track.cues];\n        store.setCuesList(trackCues as VTTCue[]);\n      },\n\n      onVideoError: () => {\n        if (!videoElement.value || !videoElement.value.error) {\n          return;\n        }\n        emit(\n          \"onVideoError\",\n          `Error code ${videoElement.value.error.code}. ${videoElement.value.error.message}`\n        );\n      },\n\n      onTimeUpdate: () => {\n        if (!videoElement.value) {\n          return;\n        }\n        store.updateCurrentTimeEvent(\n          videoElement.value.currentTime,\n          Origin.VideoPlayer\n        );\n      }\n    };\n  }\n});\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.video-player {\n  height: 100vh;\n  position: relative;\n  align-items: center;\n}\n\n.video-element {\n  width: 100%;\n}\n\n/* Hide browser's built-in subtitles */\n.video-player ::cue {\n  visibility: hidden;\n  color: transparent;\n}\n\n.video-player ::-webkit-media-controls-toggle-closed-captions-button,\n.video-player ::-webkit-media-text-track-container {\n  display: none;\n}\n</style>\n","\nimport { defineComponent, inject, ref, watch } from \"vue\";\nimport { StoreKey } from \"@/symbols\";\nimport { Origin } from \"@/interfaces/TimeEvent\";\n\nexport default defineComponent({\n  name: \"VideoPlayer\",\n\n  props: {\n    videoUrl: {\n      type: String,\n      default: \"\"\n    },\n    subtitlesUrl: {\n      type: String,\n      default: \"\"\n    }\n  },\n\n  setup(_, { emit }) {\n    const store = inject(StoreKey);\n    if (!store) {\n      throw new Error(`Could not resolve ${StoreKey.description}`);\n    }\n    const videoElement = ref<HTMLVideoElement>();\n\n    watch(\n      () => store.state.currentTimeEvent,\n      newTimeEvent => {\n        if (!videoElement.value) {\n          return;\n        }\n        if (newTimeEvent.origin === Origin.VideoPlayer) {\n          return;\n        }\n        videoElement.value.currentTime = newTimeEvent.time;\n        videoElement.value.play();\n      }\n    );\n\n    // Update videoElement's text track cues with our internal cues list when it has been changed\n    watch(\n      () => store.state.cuesHasBeenChanged,\n      cuesHasBeenChanged => {\n        if (\n          !cuesHasBeenChanged ||\n          !videoElement.value ||\n          videoElement.value.textTracks.length < 1\n        ) {\n          return;\n        }\n        const firstTextTrack = videoElement.value.textTracks[0];\n        if (!firstTextTrack.cues) {\n          return;\n        }\n        for (const trackCue of firstTextTrack.cues) {\n          const cue = store.state.cues.find(cue => cue.id === trackCue.id);\n          if (!cue) {\n            continue;\n          }\n          trackCue.startTime = cue.startTime;\n          trackCue.endTime = cue.endTime;\n        }\n        store.setCuesHasBeenChanged(false);\n      }\n    );\n\n    return {\n      videoElement,\n\n      onCueChange: (e: Event) => {\n        // Hide the built-in captions\n        const element = e.target as HTMLTrackElement;\n        element.track.mode = \"hidden\";\n        if (!element.track.activeCues || !element.track.activeCues[0]) {\n          return;\n        }\n        const firstActiveCue = element.track.activeCues[0];\n        if (!firstActiveCue) {\n          return;\n        }\n        store.setCurrentCue(firstActiveCue.id);\n      },\n\n      onCaptionsLoad: (e: Event) => {\n        // Hide the built-in captions\n        const element = e.target as HTMLTrackElement;\n        element.track.mode = \"hidden\";\n        if (!element.track.cues) {\n          return;\n        }\n        const trackCues = [...element.track.cues];\n        store.setCuesList(trackCues as VTTCue[]);\n      },\n\n      onVideoError: () => {\n        if (!videoElement.value || !videoElement.value.error) {\n          return;\n        }\n        emit(\n          \"onVideoError\",\n          `Error code ${videoElement.value.error.code}. ${videoElement.value.error.message}`\n        );\n      },\n\n      onTimeUpdate: () => {\n        if (!videoElement.value) {\n          return;\n        }\n        store.updateCurrentTimeEvent(\n          videoElement.value.currentTime,\n          Origin.VideoPlayer\n        );\n      }\n    };\n  }\n});\n","import { render } from \"./VideoPlayer.vue?vue&type=template&id=e8b554fa&scoped=true\"\nimport script from \"./VideoPlayer.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoPlayer.vue?vue&type=script&lang=ts\"\n\nimport \"./VideoPlayer.vue?vue&type=style&index=0&id=e8b554fa&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-e8b554fa\"\n\nexport default script","\nimport { computed, defineComponent, provide, ref } from \"vue\";\nimport { StoreKey } from \"./symbols\";\nimport Store from \"./Store\";\nimport SubtitleParser from \"./utils/SubtitleParser\";\nimport SrtSubtitles from \"./utils/SrtSubtitles\";\n\nimport SubtitleViewer from \"./components/SubtitleViewer.vue\";\nimport SubtitleTracklistViewer from \"./components/SubtitleTracklistViewer.vue\";\nimport VideoPlayer from \"./components/VideoPlayer.vue\";\n\nconst isSubtitleFile = function(file: File) {\n  return /\\.(srt|ass)$/.test(file.name);\n};\n\nexport default defineComponent({\n  name: \"App\",\n\n  components: {\n    SubtitleViewer,\n    SubtitleTracklistViewer,\n    VideoPlayer\n  },\n\n  setup() {\n    provide(StoreKey, Store);\n    const offsetInputElement = ref<HTMLInputElement>();\n\n    const subtitleFileName = ref(\"\");\n    const subtitlesUrl = ref(\"\");\n    const videoUrl = ref(\"\");\n    const loadVideoError = ref(\"\");\n    const loadSubtitlesError = ref(\"\");\n\n    const loadSubtitleFile = (file: File) => {\n      const reader = new FileReader();\n      reader.readAsText(file);\n      reader.onload = () => {\n        const vtt = SubtitleParser.convertFileToVtt(reader.result as string);\n        if (!vtt) {\n          subtitleFileName.value = \"\";\n          loadSubtitlesError.value = `Failed to parse subtitles (.ass or .srt): ${file.name}`;\n          return;\n        }\n        subtitlesUrl.value = `data:text/vtt;charset=utf-8,${encodeURIComponent(\n          vtt\n        )}`;\n        subtitleFileName.value = file.name;\n        loadSubtitlesError.value = \"\";\n\n        if (!offsetInputElement.value) {\n          return;\n        }\n        offsetInputElement.value.value = offsetInputElement.value.defaultValue;\n      };\n    };\n\n    const loadVideoFile = (file: File) => {\n      if (videoUrl) {\n        URL.revokeObjectURL(videoUrl.value);\n      }\n      videoUrl.value = URL.createObjectURL(file);\n      loadVideoError.value = \"\";\n    };\n\n    const downloadSubtitlesLink = computed(() => {\n      const text = SrtSubtitles.convertCaptionsToSrt(Store.state.cues);\n      if (!text) {\n        return;\n      }\n      const fileType = \"srt\";\n      const blob = new Blob([text], { type: fileType });\n      return URL.createObjectURL(blob);\n    });\n\n    return {\n      Store,\n      offsetInputElement,\n      subtitleFileName,\n      subtitlesUrl,\n      videoUrl,\n      loadVideoError,\n      loadSubtitlesError,\n      downloadSubtitlesLink,\n      onDropEvent: (e: DragEvent) => {\n        if (!e.dataTransfer) {\n          return;\n        }\n        [...e.dataTransfer.files].forEach(file => {\n          isSubtitleFile(file) ? loadSubtitleFile(file) : loadVideoFile(file);\n        });\n      },\n      onVideoError: (message: string) => {\n        loadVideoError.value = message;\n      }\n    };\n  }\n});\n","import { render } from \"./App.vue?vue&type=template&id=1247e2c7\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=1247e2c7&lang=css\"\nscript.render = render\n\nexport default script","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\n\ncreateApp(App).mount(\"#app\");\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SubtitleTracklistViewer.vue?vue&type=style&index=0&id=4d92e2ba&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SubtitleElement.vue?vue&type=style&index=0&id=2cac306e&scoped=true&lang=css\""],"sourceRoot":""}